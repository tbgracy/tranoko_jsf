<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>tranoko | Dashboard</title>

	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
	<h:outputStylesheet name="css/bootstrap.min.css"/>
	<h:outputStylesheet name="css/all.css"/>
	<link rel="shortcut icon" type="image/x-icon" href="resources/images/favicon.png"/> 

    </h:head>
    <h:body>
	<header>
	    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<a href="index.xhtml" class="navbar-brand"><h:graphicImage name="images/logo.png" class="img-fluid" width="80"/></a>

		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
		    <span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarSupportedContent">
		    <ul class="navbar-nav ml-auto">
			<li class="nav-item">
			    <a href="/tranoko_jsf" class="nav-link"><i class="fas fa-home"></i> Home</a>
			</li>
			<li class="nav-item">
			    <a href="dashboard.xhtml" class="nav-link"><i class="fas fa-dashboard"></i> Dashboard</a>
			</li>
			<li class="nav-item">
			    <a href="settings.xhtml" class="nav-link"><i class="fas fa-gear"></i> Settings</a>
			</li>
			<li class="nav-item">
			    <h:form class="form-inline"><h:commandLink action="#{login.logout}" class="nav-link"><i class="fas fa-arrow-right-from-bracket"></i> Logout</h:commandLink>
				<img src="/tranoko_jsf/ImageServlet?proprioID=#{user.currentUserID}&amp;table=user" alt="#{user.currentUserID}" style="height:40px; width:40px; border-radius: 50%; border: solid yellow 2px"/>

			    </h:form>
			</li>
		    </ul>
		</div>
	    </nav>
	</header>
	<div class="container mt-3">
	    <div class="row">
		<canvas id="myChart" class="col">

		</canvas>
<!--		<h:form class="col-2">
		    <h:selectOneMenu id="time_choice" class="custom-select" value="#{purchase.time}">
			<f:ajax execute="@all" render="myChart"/>
			<f:selectItem itemValue="day" itemLabel="Day"/>
			<f:selectItem itemValue="month" itemLabel="Month"/>
		    </h:selectOneMenu>
		</h:form>-->
	    </div>
	</div>

	<footer class="bg-dark text-center text-white-50">
	    &copy; Tsierenana BÃ´tramanagna Gracy
	</footer>
	<h:outputScript name="js/jquery-3.5.1.min.js"/>
	<h:outputScript name="js/chart.js"/>
	<h:outputScript name="js/bootstrap.bundle.min.js"/>
	<script>
                const labels = #{purchase.dates};

                const data = {
                    labels: labels,
                    datasets: [{
                            label: 'Sells',
                            backgroundColor: 'rgb(255, 206, 86)',
                            borderColor: 'rgb(255, 206, 86)',
                            data: #{purchase.sells}
                        }]
                };

                const config = {
                    type: 'line',
                    data: data,
                    options: {}
                };
	</script>
	<script>
                const myChart = new Chart(
                        document.getElementById('myChart'),
                        config
                        );
	</script>
    </h:body>
</html>

